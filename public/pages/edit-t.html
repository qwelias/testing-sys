<div>
    <form data-bind="with: _vm.test.wo">
        <!-- ko alias: 'wo' -->
        <input type="text"
            data-bind="value: wo.data.title"
            placeholder="title">
        <ol data-bind="foreach: { data: wo.data.questions, as: 'q'}">
            <li data-bind="css: { dragging: dragging },
                    dragZone: {
                        name: 'sort',
                        dragStart: Draggable.dragStart,
                        dragEnd: Draggable.dragEnd,
                    },
                    dragEvents:{
                        accepts:'sort',
                        dragOver: Draggable.reorder,
                        data: {items: wo.data.questions, item: q }
                    }">
                <span data-bind="text: q.data.body"></span>
                <a href="" data-bind="click: wo.rmQuestion.bind(wo, q)"><i class="fa fa-ban" aria-hidden="true"></i></a>
            </li>
        </ol>
        <button data-bind="click: wo.save">save</button>
        <!-- /ko -->
    </form>

    <div>
        <a class="button"
            href=""
            data-bind="page-href:'./new'">new</a>
        <div id="content-table"
            data-bind="template: {name: 'default-table-tmpl', data: _vm.question.table}"></div>
    </div>
</div>

<div id="question-edit"
    data-bind="page: {
        id: '?',
        sourceOnShow: 'pages/edit-q.html',
        guard: function(pg,rt,cb){
            if(rt.length > 1) return cb();
            Promise.all([
                _vm.question.init(rt.pop())
            ]).then(cb);
        }
    }">
</div>
